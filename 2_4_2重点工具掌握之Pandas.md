# é‡ç‚¹å·¥å…·æŒæ¡ä¹‹äºŒï¼šPandas
Hiï¼Œæœ‹å‹ä»¬ï¼Œä¸Šå‘¨æˆ‘ä»¬äº†è§£äº†Numpyçš„åŸºæœ¬ç‰¹æ€§å’Œç”¨æ³•ï¼Œè¿™å‘¨æˆ‘ä»¬å°±æ¥äº†è§£ä¸€ä¸‹å¦å¤–ä¸€ä¸ªåˆ©å™¨ â€”â€” Pandasã€‚Pandaså¸®æˆ‘ä»¬å¼•å…¥äº†æ›´é€‚åº”æ•°æ®è¡¨çš„æ•°æ®ç±»å‹ï¼Œè€Œä¸”å®ƒåŸºäºNumpyå¼€å‘ï¼Œè¿ç®—é€Ÿåº¦ä¹Ÿéå¸¸å¿«ï¼Œå¯ä»¥è¯´å®ƒåœ¨Pythonæ•°æ®åˆ†æä¸­å æ®äº†Cä½ï¼Œé‚£æˆ‘ä»¬å¿«æ¥ä¸€ç¹å®ƒçš„é£é‡‡å§ï¼

ç”±äºPandasç©¿æ’åº”ç”¨åœ¨æ•°æ®åˆ†æçš„å„ä¸ªæµç¨‹ä¸­ï¼Œæ‰€ä»¥åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å…ˆä»‹ç»Pandasçš„åŸºæœ¬çŸ¥è¯†ï¼Œç„¶ååœ¨æ¢³ç†æ•°æ®åˆ†æçš„æµç¨‹ä¸­å†è®²è§£Pandasçš„å‡½æ•°åº”ç”¨ã€‚

## æœ¬å‘¨å†…å®¹
 
- **Pandas**ç®€ä»‹
- **Pandas Series**
- **Pandas DataFrame**
- æ•°æ®åˆ†ææµç¨‹åŠPandaså‡½æ•°åº”ç”¨
- å»¶ä¼¸ï¼šPandasæ•°æ®èåˆ

### Pandasç®€ä»‹
 
**Pandas** æ˜¯ Python ä¸­çš„æ•°æ®æ“çºµå’Œåˆ†æè½¯ä»¶åŒ…ï¼Œå®ƒæ˜¯åŸºäºNumpyå»å¼€å‘çš„ï¼Œæ‰€ä»¥Pandasçš„æ•°æ®å¤„ç†é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œè€Œä¸”Numpyä¸­çš„æœ‰äº›å‡½æ•°åœ¨Pandasä¸­ä¹Ÿèƒ½ä½¿ç”¨ï¼Œæ–¹æ³•ä¹Ÿç±»ä¼¼ã€‚
 
Pandas ä¸º Python å¸¦æ¥äº†ä¸¤ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼Œå³ **Pandas Series**(å¯ç±»æ¯”äºè¡¨æ ¼ä¸­çš„æŸä¸€åˆ—)å’Œ **Pandas DataFrame**(å¯ç±»æ¯”äºè¡¨æ ¼)ã€‚å€ŸåŠ©è¿™ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè½»æ¾ç›´è§‚åœ°å¤„ç†*å¸¦æ ‡ç­¾*æ•°æ®å’Œ*å…³ç³»*æ•°æ®ã€‚
 
> âš ï¸Seriesä¸­å„ä¸ªå…ƒç´ çš„æ•°æ®ç±»å‹å¯ä»¥ä¸ä¸€è‡´ï¼ŒDataFrameä¹Ÿæ˜¯å¦‚æ­¤ï¼Œè¿™ä¸numpyçš„ndarrayä¸åŒã€‚

> å…¶å®è¿˜æœ‰ä¸€ä¸ªä¸‰ç»´çš„æ•°æ®ç»“æ„Panelï¼Œä½†ç”¨çš„å¾ˆå°‘ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥äº†è§£ä¸€ä¸‹ï½

### åˆ›å»ºPandas Series
 
å¯ä»¥ä½¿ç”¨ `pd.Series(data, index)` å‘½ä»¤åˆ›å»º Pandas Seriesï¼Œå…¶ä¸­`data`è¡¨ç¤ºè¾“å…¥æ•°æ®ï¼Œ `index` ä¸ºå¯¹åº”æ•°æ®çš„ç´¢å¼•ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ å‚æ•°`dtype`æ¥è®¾ç½®è¯¥åˆ—çš„æ•°æ®ç±»å‹ã€‚
 
ç¤ºä¾‹:
 
```python
import pandas as pd #çº¦å®šä¿—æˆçš„ç®€ç§°
pd.Series(data = [30, 6, 7, 5], index = ['eggs', 'apples', 'milk', 'bread'],dtype=float)
 
out:
eggs      30.0
apples     6.0
milk       7.0
bread      5.0
dtype: float64
```
 
`data`é™¤äº†å¯ä»¥è¾“å…¥åˆ—è¡¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¾“å…¥å­—å…¸ï¼Œæˆ–è€…æ˜¯ç›´æ¥ä¸€ä¸ªæ ‡é‡ã€‚
 
```python
#dataè¾“å…¥å­—å…¸
pd.Series(data = {'eggs':30,'apples': 6,  'milk':7, 'bread':5},dtype=float)
 
out:
apples     6.0
bread      5.0
eggs      30.0
milk       7.0
dtype: float64
 
#dataè¾“å…¥æŸä¸€æ ‡é‡
pd.Series(data = 7, index = ['eggs', 'apples', 'milk', 'bread'])
 
out:
eggs      7
apples    7
milk      7
bread     7
dtype: int64
```
 
### è®¿é—®å’Œåˆ é™¤Seriesä¸­çš„å…ƒç´ 
 
- **è®¿é—®**
 
è®¿é—®Seriesä¸­çš„å…ƒç´ æœ‰ä¸¤ç§æ–¹æ³•ï¼š
 
ä¸€ç§ç±»ä¼¼äºä»åˆ—è¡¨ä¸­æŒ‰ç…§ç´¢å¼•è®¿é—®æ•°æ®ï¼Œä¸€ç§ç±»ä¼¼äºä»å­—å…¸ä¸­æŒ‰ç…§**key**æ¥è®¿é—®**value**ã€‚
 
ä¸‹é¢çœ‹ç¤ºä¾‹ï¼š
 
![FY9vQg.png](https://s1.ax1x.com/2018/12/11/FY9vQg.png)
 
ä»ä¸Šé¢ä»£ç é‡Œä¹Ÿèƒ½å‘ç°ï¼ŒPandasæä¾›çš„`iloc`ä¸`loc`åˆ†åˆ«å¯¹åº”ç€æŒ‰ç´¢å¼•è®¿é—®å’ŒæŒ‰keyè®¿é—®ã€‚
 
- **ä¿®æ”¹**
 
å› ä¸ºSeriesæ˜¯å¯æ›´æ”¹ç±»å‹ï¼Œè‹¥æƒ³æ›´æ”¹å…¶ä¸­æŸä¸€é¡¹ï¼Œåªéœ€è®¿é—®å®ƒç„¶åé‡æ–°èµ‹å€¼å³å¯ã€‚
 
- **åˆ é™¤**
 
å¯ä»¥ä½¿ç”¨ `.drop()` æ–¹æ³•åˆ é™¤ Pandas Series ä¸­çš„æ¡ç›®ã€‚`Series.drop(label)` æ–¹æ³•ä¼šä»ç»™å®š `Series` ä¸­åˆ é™¤ç»™å®šçš„ `label`ã€‚è¿™ä¸ª`label`å¯ä»¥æ˜¯å•ä¸ªlabelæˆ–è¿™æ˜¯labelç»„æˆçš„listã€‚
 
![FYPWKe.png](https://s1.ax1x.com/2018/12/11/FYPWKe.png)
 
ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`.drop()`å‡½æ•°å¹¶ä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°æ®ï¼Œå¦‚æœä½ æƒ³è¦ä¿®æ”¹åŸæ•°æ®çš„è¯ï¼Œå¯ä»¥é€‰æ‹©æ·»åŠ å‚æ•°`inplace = True`æˆ–è€…æ˜¯ç”¨åŸæ•°æ®æ›¿æ¢`s = s.drop(label)`
> `inplace`å‚æ•°ä¼šç»å¸¸å‡ºç°åœ¨Pandasçš„å‡½æ•°ä¸­ï¼Œæ‰€ä»¥ï¼Œå†™ä»£ç æ—¶ä¸€å®šè¦ç»†å¿ƒï¼Œä¸è¦é—¹å‡ºè¯¸å¦‚`s = s.drop(label,inplace=True)`è¿™æ ·çš„ä¹Œé¾™ã€‚
 
### Seriesè¿ç®—
 
å’Œndarrayä¸€æ ·ï¼ŒSeriesä¹Ÿå¯ä»¥è¿›è¡Œ**å…ƒç´ çº§**çš„ç®—æœ¯è¿ç®—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨npä¸­æä¾›çš„å„ç§è¿ç®—å‡½æ•°ï¼Œå¦‚`sqrt()`ç­‰ç­‰ã€‚
 
è¿™é‡Œå¯ä»¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœSeriesä¸­åŒ…å«å­—ç¬¦ä¸²ï¼Œç„¶åå†è¿›è¡Œä¹˜æ³•ä¼šæ˜¯ä»€ä¹ˆç»“æœï¼Ÿ
 
å¯ä»¥å›æƒ³ä¸‹å­—ç¬¦ä¸²çš„çŸ¥è¯†`'*'*10`çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ
 
### åˆ›å»ºDataFrame
 
æˆ‘ä»¬ä½¿ç”¨`pd.DataFrame(data, index, columns)`æ¥åˆ›å»ºä¸€ä¸ªDataFrameã€‚
 
å…¶ä¸­ï¼š
 
`data`æ˜¯æ•°æ®ï¼Œå¯ä»¥è¾“å…¥ndarrayï¼Œæˆ–è€…æ˜¯å­—å…¸ï¼ˆå­—å…¸ä¸­å¯ä»¥åŒ…å«Seriesæˆ–arraysæˆ–ï¼‰ï¼Œæˆ–è€…æ˜¯DataFrameï¼›
 
`index`æ˜¯ç´¢å¼•ï¼Œè¾“å…¥åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å‚æ•°ï¼Œä¼šé»˜è®¤ä»¥0å¼€å§‹å¾€ä¸‹è®¡æ•°ï¼›
 
`columns`æ˜¯åˆ—åï¼Œè¾“å…¥åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å‚æ•°ï¼Œä¼šé»˜è®¤ä»¥0å¼€å§‹å¾€å³è®¡æ•°ï¼›
 
ç¤ºä¾‹ï¼š
 
![FYkQDe.png](https://s1.ax1x.com/2018/12/11/FYkQDe.png)
 
ä»ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå­—å…¸`d`ä¸­çš„`key`è¢«å½“ä½œåˆ—åï¼Œ`value`è¢«å½“ä½œdataframeä¸­çš„æ•°æ®ã€‚
 
> ğŸ¤” å¦‚æœåœ¨ä¸Šè¿°ä»£ç ä¸­æ·»åŠ ä¸€ä¸ªcolumnsåˆ—ï¼Œå¦‚`df = pd.DataFrame(data=d,index = ['a','b'],columns = ['col_1','col_2'])`ï¼Œä¼šè¿”å›ä»€ä¹ˆç»“æœå‘¢ï¼Ÿ
 
### è®¿é—®DataFrameä¸­çš„å…ƒç´ 
 
ä¸è®¿é—®Seriesä¸­çš„å…ƒç´ ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ—è¡¨å¼ç´¢å¼•è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å­—å…¸å¼Keyå€¼è®¿é—®ã€‚
 
- åˆ›å»ºä¸€ä¸ªDataFrame
 
![FYfMh6.png](https://s1.ax1x.com/2018/12/12/FYfMh6.png)
 
 
 
- è®¿é—®æŸä¸€è¡Œ
 
![FYh15q.png](https://s1.ax1x.com/2018/12/12/FYh15q.png)
 
- è®¿é—®å¤šè¡Œ
 
![FY4lOe.png](https://s1.ax1x.com/2018/12/12/FY4lOe.png)
 
- è®¿é—®æŸä¸€åˆ—
 
![FY4nW6.png](https://s1.ax1x.com/2018/12/12/FY4nW6.png)
 
- è®¿é—®å¤šåˆ—
 
![FY4tYt.png](https://s1.ax1x.com/2018/12/12/FY4tYt.png)
 
> âš ï¸ä½¿ç”¨df.iloc[:,0:2]è¿™ç§æ–¹æ³•åªèƒ½ç­›é€‰å‡ºè¿ç»­çš„åˆ—ï¼Œé‚£å¦‚æœæƒ³è¦ç­›é€‰çš„åˆ—åˆ†åˆ«åœ¨1,3,5,10:17æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥æœä¸€ä¸‹`np.r_`çš„ç”¨æ³•ï¼Œè¯•è¯•çœ‹ï¼
 
- è®¿é—®æŸä¸€å…ƒç´ 
 
![FY4aSf.png](https://s1.ax1x.com/2018/12/12/FY4aSf.png)
 
> ğŸ¤” åœ¨ç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆè®¿é—®åˆ—ï¼Œå†è®¿é—®è¡Œï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿ
### åˆ é™¤ã€å¢åŠ å…ƒç´ 
 
- åˆ é™¤å…ƒç´ 
 
æˆ‘ä»¬ä½¿ç”¨`.drop`å‡½æ•°åˆ é™¤å…ƒç´ ï¼Œé»˜è®¤ä¸ºåˆ é™¤è¡Œï¼Œæ·»åŠ å‚æ•°`axis = 1`æ¥åˆ é™¤åˆ—ã€‚
 
![FY5x2V.png](https://s1.ax1x.com/2018/12/12/FY5x2V.png)
 
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`drop`å‡½æ•°ä¸ä¼šä¿®æ”¹åŸæ•°æ®ï¼Œå¦‚æœæƒ³ç›´æ¥å¯¹åŸæ•°æ®è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå¯ä»¥é€‰æ‹©æ·»åŠ å‚æ•°`inplace = True`æˆ–ç”¨åŸå˜é‡åé‡æ–°èµ‹å€¼æ›¿æ¢ã€‚
 
- å¢åŠ å…ƒç´ 
 
è¿™é‡Œå…ˆä»‹ç»ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯`append()`ï¼Œå¦å¤–ä¸€ç§æ˜¯`insert()`ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½æ¯”è¾ƒç®€å•ï¼Œå¯ç±»æ¯”äºpython listä¸­çš„ä¸¤ç§æ–¹æ³•è¿›è¡Œå­¦ä¹ ã€‚
 
æ­¤å¤–ï¼ŒPandasè¿˜æä¾›äº†å…¶ä»–æ›´ä¸ºå¤æ‚çš„åšDataFrameèåˆçš„å‡½æ•°ï¼Œæ¯”å¦‚è¯´`concat()`ã€`merge()`ã€`join()`ç­‰ç­‰ï¼Œç›¸å¯¹éš¾ä¸€äº›ï¼Œä¼šæ”¾åœ¨å»¶ä¼¸å†…å®¹Pandasæ•°æ®èåˆä¸­è¿›è¡Œè®²è§£ã€‚
 
### æ›´æ”¹è¡Œåˆ—æ ‡ç­¾
 
ä½¿ç”¨å‡½æ•°`rename()`å³å¯ã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š
 
![FYIIiR.png](https://s1.ax1x.com/2018/12/12/FYIIiR.png)
 
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨éšåŒ¿å‡½æ•°lambdaæ¥å¯¹è¡Œåˆ—æ ‡ç­¾è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œæ¯”å¦‚ï¼š
 
![FYIoJ1.png](https://s1.ax1x.com/2018/12/12/FYIoJ1.png)
 
éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`rename()`å‡½æ•°åŒæ ·ä¸ä¼šæ›´æ”¹åŸæ•°æ®ï¼Œå¦‚æœæƒ³ç›´æ¥å¯¹åŸæ•°æ®è¿›è¡Œä¿®æ”¹çš„è¯ï¼Œå¯ä»¥é€‰æ‹©æ·»åŠ å‚æ•°`inplace = True`æˆ–ç”¨åŸå˜é‡åé‡æ–°èµ‹å€¼æ›¿æ¢ã€‚
 
### æ›´æ”¹ç´¢å¼•
 
å¯ä»¥ä½¿ç”¨å‡½æ•°`set_index(index_label)`ï¼Œå°†æ•°æ®é›†çš„indexè®¾ç½®ä¸º`index_label`ã€‚
 
é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°`reset_index()`é‡ç½®æ•°æ®é›†çš„indexä¸º0å¼€å§‹è®¡æ•°çš„æ•°åˆ—ã€‚
 
### ç¼ºå¤±å€¼(NaN)å¤„ç†
 
`NaN`å°±æ˜¯**Not a Number**çš„ç¼©å†™ï¼Œè¡¨ç¤ºè¿™é‡Œæœ‰æ•°æ®ç¼ºå¤±ã€‚ 

> å¦‚ä½•å¤„ç†ç¼ºå¤±å€¼å‘¢ï¼Ÿè¿™å°±è¦æ ¹æ®ç¡®å®æ•°æ®çš„æƒ…å†µè€Œå®šäº†ï¼Œæ˜¯ç›´æ¥åˆ é™¤ï¼Ÿè¿˜æ˜¯æš´åŠ›å¹³å‡å€¼æ›¿æ¢ï¼Ÿè¿˜æ˜¯åˆ†ç±»ä¹‹åå†ç”¨å¹³å‡å€¼æ›¿æ¢ï¼Ÿè¿˜æ˜¯ç”¨ä¸€äº›ä»€ä¹ˆå…¶ä»–çš„æ–¹æ³•ï¼Œå…¨é ä½ å»æŠŠæ¡äº†ã€‚å¯ä»¥çœ‹ä¸€çœ‹**Python Data Science**è¿™æœ¬ä¹¦ä¸­çš„[**Handling Missing Data**](https://jakevdp.github.io/PythonDataScienceHandbook/03.04-missing-values.html)ç« èŠ‚ï¼Œä½ è‚¯å®šä¼šæœ‰æ‰€æ”¶è·çš„ã€‚
 
- æŸ¥æ‰¾NaN
 
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`isnull()`å’Œ`notnull()`å‡½æ•°æ¥æŸ¥çœ‹æ•°æ®é›†ä¸­æ˜¯å¦å­˜åœ¨ç¼ºå¤±æ•°æ®ï¼Œåœ¨è¯¥å‡½æ•°åé¢æ·»åŠ `sum()`å‡½æ•°æ¥å¯¹ç¼ºå¤±æ•°é‡è¿›è¡Œç»Ÿè®¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨`count()`å‡½æ•°å¯¹éNaNæ•°æ®è¿›è¡Œç»Ÿè®¡è®¡æ•°ã€‚
 
![FYIzFA.png](https://s1.ax1x.com/2018/12/12/FYIzFA.png)
 
- åˆ é™¤NaN
 
ä½¿ç”¨`dropna(axis)`å‡½æ•°å¯ä»¥åˆ é™¤åŒ…å«NaNçš„è¡Œæˆ–åˆ—ã€‚
 
>  `dropna()`å‡½æ•°è¿˜æœ‰ä¸€ä¸ªå‚æ•°æ˜¯`how`ï¼Œå½“`how = all`æ—¶ï¼Œåªä¼šåˆ é™¤å…¨éƒ¨æ•°æ®éƒ½ä¸ºNaNçš„åˆ—æˆ–è¡Œã€‚
 
åŒæ ·ï¼Œè¯¥å‡½æ•°ä¹Ÿä¸ä¼šä¿®æ”¹åŸæ•°æ®é›†ã€‚
 
- æ›¿æ¢NaN
 
ä½¿ç”¨`fillna()`å‡½æ•°å¯ä»¥æ›¿æ¢NaNä¸ºæŸä¸€å€¼ã€‚å…¶å‚æ•°å¦‚ä¸‹ï¼š
 
1. **value**ï¼šç”¨æ¥æ›¿æ¢NaNçš„å€¼
2. **method**ï¼šå¸¸ç”¨æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯`ffill`å‰å‘å¡«å……ï¼Œä¸€ç§æ˜¯`backfill`åå‘å¡«å……
3. **axis**ï¼š0ä¸ºè¡Œï¼Œ1ä¸ºåˆ—
4. **inplace**ï¼šæ˜¯å¦æ›¿æ¢åŸæ•°æ®ï¼Œé»˜è®¤ä¸ºFalse
5. **limit**ï¼šæ¥å—intç±»å‹çš„è¾“å…¥ï¼Œå¯ä»¥é™å®šæ›¿æ¢å‰å¤šå°‘ä¸ªNaN
 
 
è¿˜å¯ä»¥ä½¿ç”¨`interpolate()`å‡½æ•°æŒ‰ç…§æŸä¸€æ–¹æ³•æ¥æ›¿æ¢NaNï¼Œå¦‚`linear`ï¼Œå®ƒæ˜¯å¿½ç•¥ç´¢å¼•å¹¶å°†å€¼è§†ä¸ºç›¸ç­‰é—´è·ï¼Œè¿™æ˜¯è¯¥å‡½æ•°çš„é»˜è®¤æ–¹æ³•ã€‚æ›´å¤šmethodåŠè§£è¯»è¯·æˆ³[pandas.DataFrame.interpolate](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.interpolate.html)
 
### æ•°æ®åˆ†ææµç¨‹åŠPandasåº”ç”¨
 
**æ•°æ®åˆ†æä¸æ˜¯ä»ä¸Šè‡³ä¸‹ä¸€è¹´è€Œå°±çš„è¿‡ç¨‹ï¼Œè€Œæ˜¯éœ€è¦ä½ ä¸æ–­è¿­ä»£ã€é‡å¤ã€å®Œå–„ï¼Œæœ€ç»ˆå¾—åˆ°ç»“è®ºçš„è¿‡ç¨‹ã€‚**
 
#### æå‡ºé—®é¢˜
 
- æ•°æ®é›†ä¸­çš„å„ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦å­˜åœ¨æŸäº›è”ç³»ï¼Ÿ
 
- å˜é‡çš„ç»Ÿè®¡ç»“æœä¼šæ­ç¤ºä»€ä¹ˆï¼Ÿ
 
- æ ¹æ®ç°æœ‰æŒæ¡çš„æ•°æ®ï¼Œèƒ½å¦å¯¹æœªæ¥èµ°åŠ¿è¿›è¡Œé¢„æµ‹ï¼Ÿ
 
- æ ¹æ®ä½ æƒ³äº†è§£çš„é—®é¢˜ï¼Œå»æ”¶é›†æ•°æ®ï¼Œå†å¯¹é—®é¢˜è¿›è¡Œä¿®ç¼®ï¼Œå¦‚æ­¤**è¿­ä»£**ï¼Œè·å–æ›´å…¨é¢çš„æ•°æ®ï¼Œæå‡ºæ›´ä¸€é˜µè§è¡€çš„é—®é¢˜ã€‚
 
  ...
 
#### æ•´ç†æ•°æ®
æ•´ç†æ•°æ®æ˜¯æ•´ä¸ªæ•°æ®åˆ†ææµç¨‹ä¸­æœ€ä¸ºè€—æ—¶ã€æœ€ç£¨è€å¿ƒçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¹Ÿæ˜¯å¯¹ç»“æœå½±å“æœ€å¤§çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ï¼Œå¤§å®¶ä¸€å®šè¦è¸ä¸‹å¿ƒæ¥ï¼Œç»“åˆå®é™…ä¸šåŠ¡ï¼Œä¸€å®šè¦æŠŠè¿™éƒ¨åˆ†åšæ‰å®ï½
 
- æ”¶é›†
 
  æ•°æ®åº“æå–ï¼Ÿç›´æ¥ä¸‹è½½ï¼Ÿç½‘ç»œçˆ¬è™«ï¼Ÿ
 
- è¯„ä¼°
 
  è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯¹æ•°æ®äº§ç”Ÿç›´è§‚å°è±¡çš„è¿‡ç¨‹ï¼Œä½ è¦å°è¯•äº†è§£æ•°æ®é›†çš„å¤§å°ï¼ŒåŸºæœ¬çš„ç»Ÿè®¡ç»“æœï¼Œæ˜¯å¦å­˜åœ¨æ•°æ®é‡å¤ï¼Ÿç¼ºå¤±ï¼Ÿæ•°æ®ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Ÿæ˜¯å¦æ¯ä¸ªå˜é‡æˆä¸€åˆ—&æ¯ä¸ªè§‚å¯Ÿå€¼æˆä¸€è¡Œï¼Ÿæ•°æ®æ˜¯å¦æœ‰ç»Ÿè®¡é”™è¯¯ï¼Ÿ(ä¸¥é‡åç¦»æ­£å¸¸å€¼ï¼Œæ¯”å¦‚è¯´æ°”æ¸©è¾¾åˆ°70â„ƒç­‰ç­‰)...
  - æ‰“å¼€æ–‡ä»¶
   ```python
  #æ‰“å¼€csvæ–‡ä»¶
  pd.read_csv('filename')
  #æ‰“å¼€excelæ–‡ä»¶
  pd.read_excel('filename')
  #å¤„ç†ä¸­æ–‡å­—ç¬¦çš„tsvæ–‡ä»¶
  pd.read_csv('filename',sep = '\t',encoding = 'utf-8')
  ```
  - æŸ¥çœ‹æ•°æ®é›†æ•°æ®
 
  ```python
  #æŸ¥çœ‹å‰äº”è¡Œ
  df.head()
  #æŸ¥çœ‹å°¾äº”è¡Œ
  df.tail()
  #æŸ¥çœ‹éšæœºä¸€è¡Œ
  df.sample()
  ```
 
    - æŸ¥çœ‹æ•°æ®é›†ä¿¡æ¯
 
  ```python
  #æŸ¥çœ‹æ•°æ®é›†è¡Œæ•°å’Œåˆ—æ•°
  df.shape
  #æŸ¥çœ‹æ•°æ®é›†ä¿¡æ¯ï¼ˆåˆ—åã€æ•°æ®ç±»å‹ã€æ¯åˆ—çš„æ•°æ®é‡â€”â€”å¯ä»¥çœ‹å‡ºæ•°æ®ç¼ºå¤±æƒ…å†µï¼‰
  df.info()
  #æŸ¥çœ‹æ•°æ®é›†åŸºæœ¬ç»Ÿè®¡ä¿¡æ¯
  df.describe()
  #æŸ¥çœ‹æ•°æ®é›†åˆ—å
  df.columns
  #æŸ¥çœ‹æ•°æ®é›†æ•°æ®ç¼ºå¤±æƒ…å†µ 
  df.isnull().sum()
  #æŸ¥çœ‹ç¼ºå¤±åˆ—æ•°æ®
  df[df['col_name'].isnull()]
  #æŸ¥çœ‹æ•°æ®é›†æ•°æ®é‡å¤æƒ…å†µ
  sum(df.duplicated())
  #æŸ¥çœ‹é‡å¤æ•°æ®
  df[df.duplicated()]
  #æŸ¥çœ‹æŸåˆ—åˆ†ç±»ç»Ÿè®¡æƒ…å†µ
  df['col_name'].value_counts()
  #æŸ¥çœ‹æŸåˆ—å”¯ä¸€å€¼
  df['col_name'].unique()
  #æŸ¥çœ‹æŸåˆ—å”¯ä¸€å€¼æ•°é‡
  df['col_name'].nunique()
  #ä»¥æŸåˆ—å¯¹æ•°æ®é›†è¿›è¡Œæ’åº
  df.sort_values(by = 'col_name',ascending = False)#Falseä¸ºç”±å¤§è‡³å°
  ```
     - æ•°æ®ç­›é€‰
 
  ```python
  #æå–æŸè¡Œ
  df.iloc[row_index]
  df.loc['row_name']
  #æå–æŸå‡ è¡Œ
  df.iloc[row_index_1:row_index_2]
  #æå–æŸåˆ—
  df['col_name']
  #æå–æŸå‡ åˆ—
  df[['col_name_1','col_name_2']]
  #æå–æŸè¡ŒæŸåˆ—çš„å€¼
  df.iloc[row_index,col_index]
  df.loc['row_name','col_name']
  #ç­›é€‰æŸåˆ—ä¸­æ»¡è¶³æŸæ¡ä»¶çš„æ•°æ®
  df[df['col_name'] == value]#ç­‰äºæŸå€¼çš„æ•°æ®ï¼ŒåŒç†æ»¡è¶³æ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦
  df.query('col_name == value')#ä»£ç æ•ˆæœåŒä¸Š
  df[(df['col_name_1'] >= value_1) & (df['col_name_2'] != value_2)]#ä¸&ï¼Œæˆ–|
  df.query('(col_name_1 >= value_lower) & (col_name_2 <= value_upper)')
  df.groupby('col_name')#æŒ‰col_nameåˆ—è¿›è¡Œåˆ†ç»„ï¼Œèšç±»
  ```
- æ¸…ç†
 
  å¯¹è¯„ä¼°å‡ºçš„é—®é¢˜è¿›è¡Œé€é¡¹æ’æŸ¥ã€æ¸…ç†ï¼Œç›´è‡³è·å–åˆ°å¹²å‡€çš„æ•°æ®ï¼ˆæ¨èè¶…çº§æœ‰ç”¨ä¸”ç»å…¸çš„[Tidy Data](https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html)ï¼Œè™½ç„¶ä»£ç ç”¨çš„æ˜¯Rè¯­è¨€ï¼Œä½†ä»£ç ä¸å°±åªæ˜¯å·¥å…·è€Œå·²å˜›ï¼Œå…³é”®çš„æ˜¯**æ€ç»´æ–¹æ³•**ï¼‰
 
  ```python
  #åˆ é™¤æŸè¡Œ
  df.drop(['row_name'],inplace = True)#è‹¥æ·»åŠ inplace = Trueï¼Œä¿®æ”¹åçš„æ•°æ®ä¼šè¦†ç›–åŸå§‹æ•°æ®
  #åˆ é™¤æŸåˆ—
  df.drop(['col_name'],axis = 1)
  #ç¼ºå¤±å€¼çš„å¤„ç†
  df.fillna(mean_value)#æ›¿æ¢ç¼ºå¤±å€¼
  df.dropna()#åˆ é™¤åŒ…å«ç¼ºå¤±å€¼çš„è¡Œ
  df.dropna(axis = 1, how = 'all')#åªåˆ é™¤æ‰€æœ‰æ•°æ®ç¼ºå¤±çš„åˆ—
  #åˆ é™¤é‡å¤å€¼
  drop_duplicates(inplace = True)
  #æ›´æ”¹æŸè¡Œ/åˆ—/ä½ç½®æ•°æ®
  ç”¨ilocæˆ–è€…locç›´æ¥æ›¿æ¢ä¿®æ”¹å³å¯
  #æ›´æ”¹æ•°æ®ç±»å‹
  df['datetime_col'] = pd.to_datetime(df['datetime_col'])
  df['col_name'].astype(str)#è¿˜å¯ä»¥æ˜¯int/float...
  #æ›´æ”¹åˆ—å
  df.rename(columns={'A':'a', 'C':'c'}, inplace = True)
  #applyå‡½æ•°
  #è®²functionåº”ç”¨åœ¨col_nameåˆ—ï¼Œæ­¤æ–¹æ³•æ¯”ç”¨forå¾ªç¯å¿«å¾—å¤šå¾—å¤š
  df['col_name'].apply(function)
  ```
  
#### æ¢ç´¢æ€§æ•°æ®åˆ†æ
 
å³Exploratory data analysis(EDA)ï¼Œè¿™æ˜¯ä¸€ç§åˆ†ææ•°æ®é›†â€”â€”å°¤å…¶æ˜¯é™Œç”Ÿæ•°æ®é›†â€”â€”çš„æ–¹æ³•ï¼Œå…·ä½“å®æ–½çš„è¯å¯ä»¥é‡‡ç”¨å®šé‡ã€å®šæ€§çš„æ•°æ®åˆ†ææˆ–è€…æ˜¯å¯è§†åŒ–åˆ†æã€‚
 
è¿™æ˜¯ä¸€ä¸ªå¼ºè°ƒ**è¿­ä»£**çš„è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µä½ è¦ä¸æ–­çš„å¯¹æ•°æ®è¿›è¡Œæ¢ç´¢ï¼ˆæé—®ã€æ•´ç†ã€åˆ†æã€å¯è§†åŒ–ç­‰ç­‰ï¼‰ï¼Œæ ¹æ®ä½ å¾—åˆ°çš„ç»“æœå†å»ä¸°å¯Œä½ çš„æ•°æ®æˆ–è€…å®Œå–„ä½ çš„é—®é¢˜ï¼Œæœ€ç»ˆå¾—å‡ºç»“è®ºã€‚
 
è¿™æ˜¯ä¸€ä¸ªè€ƒéªŒè€å¿ƒå’Œç»†å¿ƒçš„ç¹çè¿‡ç¨‹ï¼Œæ‰€ä»¥ä¸€å®šè¦**å¿ƒå¹³æ°”å’Œ**ï¼Œä¿æŒ**å·¥ä½œçš„è¿è´¯æ€§**ã€‚ï¼ˆ~~ä¸åšå®Œä¸€å¥—ä¸èƒ½ç¡è§‰ï¼Ÿ~~ï¼‰

åœ¨åšEDAçš„è¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯å°±æ˜¯å¤‡ä»½ï¼
```python
#å¯¼å‡ºcsvæ–‡ä»¶
df.to_csv('filename.csv',index = False)
#å¯¼å‡ºä¸­æ–‡å­—ç¬¦çš„excelæ–‡ä»¶
df.to_excel('filename.xlsx',index = False,encoding = 'utf-8-sig')
```
 
> Tip:[utf-8ä¸utf-8-sig ä¸¤ç§ç¼–ç æ ¼å¼åŒºåˆ«](https://blog.csdn.net/u012965373/article/details/52680787)
 
#### å¾—å‡ºç»“è®º
 
- é€šè¿‡å¯è§†åŒ–å±•ç¤ºç»“è®º
- åˆ©ç”¨ç»Ÿè®¡å­¦æŒ‡æ ‡ï¼Œå¦‚å‡è®¾æ£€éªŒçš„p-å€¼ç­‰æä¾›ç†è®ºæ”¯æ’‘
- åˆ©ç”¨æœºå™¨å­¦ä¹ ç®—æ³•å¯¹æ•°æ®è¿›è¡Œé¢„æµ‹ã€åˆ†ç±»ã€å…³è”åº¦åˆ†æç­‰
 
#### ä¼ è¾¾ç»“æœ
 
æ’°å†™æŠ¥å‘Šï¼Œå’Œåˆ«äººåˆ†äº«ä½ çš„ç ”ç©¶ç»“æœã€‚ä¸ç®¡ä½ æŠ¥å‘Šçš„è½½ä½“æ˜¯PDFï¼ŒPPTè¿˜æ˜¯äº¤äº’å¼çš„ç½‘é¡µï¼Œéƒ½éœ€è¦ä½ å‡ç»ƒå‡ºæœ€ç²¾ç®€çš„ç‚¹ï¼Œä¸€é’ˆè§è¡€ã€‚
> æ‰€ä»¥ï¼Œæ•°æ®åˆ†æå¸ˆä»¬åšçš„éƒ½æ˜¯è¡¨é¢å…‰é²œï¼ŒèƒŒåœ°é‡Œæ¸…ç†~~å¤´å‘~~æ•°æ®çš„å·¥ä½œã€‚ã€‚ã€‚
 
 
### å»¶ä¼¸ï¼šæ•°æ®èåˆ
æ•°æ®èåˆè¿™éƒ¨åˆ†ï¼Œä¸»è¦åŒ…æ‹¬å››ä¸ªå‡½æ•°mergeä¸joinï¼Œconcatä¸appendï¼Œè¿™é‡Œåªå±•ç¤ºåŸºæœ¬ç”¨æ³•ä¸æ€»ç»“ï¼Œæ›´å¤šå®ä¾‹å¯ä»¥æˆ³(https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html)
- merge
mergeæ„ä¸º**åˆå¹¶**ï¼Œå½“ä¸¤ä¸ªæ•°æ®é›†éœ€è¦æŒ‰ç…§æŸä¸ªå…±æœ‰åˆ—è¿›è¡Œåˆå¹¶æ—¶ï¼Œå°±éœ€è¦ç”¨åˆ°mergeäº†ï¼Œå®ƒçš„å…³é”®å‚æ•°ä¸ºé“¾æ¥æ–¹å¼`how`ï¼Œé»˜è®¤ä¸ºå†…é“¾æ¥ï¼Œå¤§å®¶å¯ä»¥ç±»æ¯”SQLä¸­çš„JOINå»å­¦ä¹ 
  > mergeçš„è¿æ¥æ–¹å¼ä¸SQLå¯¹æ¯”
 
  > | åˆå¹¶æ–¹å¼ | SQL JOIN           | æè¿°                    |
  > | -------- | ------------------ | ----------------------- |
  > | `left`   | `LEFT OUTER JOIN`  | åªç”¨å·¦è¡¨çš„keyå»åŒ¹é…é“¾æ¥ |
  > | `right`  | `RIGHT OUTER JOIN` | åªç”¨å³è¡¨çš„keyå»åŒ¹é…é“¾æ¥ |
  > | `outer`  | `FULL OUTER JOIN`  | ä¸¤è¡¨ä¸­keyçš„å¹¶é›†         |
  > | `inner`  | `INNER JOIN`       | ä¸¤è¡¨ä¸­keyçš„äº¤é›†         |
  å®ä¾‹ï¼š
```
In [1]: left = pd.DataFrame({'key': ['K0', 'K1', 'K2', 'K3'],
   ....:                      'A': ['A0', 'A1', 'A2', 'A3'],
   ....:                      'B': ['B0', 'B1', 'B2', 'B3']})
   ....: 
 
In [2]: right = pd.DataFrame({'key': ['K0', 'K1', 'K2', 'K3'],
   ....:                       'C': ['C0', 'C1', 'C2', 'C3'],
   ....:                       'D': ['D0', 'D1', 'D2', 'D3']})
   ....: 
 
In [3]: result = pd.merge(left, right, on='key')
```
![_images/merging_merge_on_key.png](https://pandas.pydata.org/pandas-docs/stable/_images/merging_merge_on_key.png) 
- join
joinæ˜¯ä¸€ç§åŸºäºmergeçš„å¿«é€Ÿåˆå¹¶æ–¹æ³•ï¼Œæ‰€éœ€å‚æ•°è¾ƒå°‘ï¼Œé»˜è®¤ä»¥indexä½œä¸ºé“¾æ¥é”®ï¼Œè¿›è¡Œå·¦é“¾æ¥ã€‚
```
In [4]: left = pd.DataFrame({'A': ['A0', 'A1', 'A2'],
   ....:                      'B': ['B0', 'B1', 'B2']},
   ....:                      index=['K0', 'K1', 'K2'])
   ....: 
 
In [5]: right = pd.DataFrame({'C': ['C0', 'C2', 'C3'],
   ....:                       'D': ['D0', 'D2', 'D3']},
   ....:                       index=['K0', 'K2', 'K3'])
   ....: 
 
In [6]: result = left.join(right)
```
 
![_images/merging_join.png](https://pandas.pydata.org/pandas-docs/stable/_images/merging_join.png) 
- concat
concatæ˜¯å•è¯concatenateçš„ç®€ç§°ï¼Œæ„ä¸º**æ‹¼æ¥**ï¼Œå®ƒæ˜¯ç”¨æ¥å¤„ç†æ‹¼æ¥å¤šä¸ªå…·æœ‰ç›¸åŒåˆ—åæˆ–è€…ç´¢å¼•çš„æ•°æ®ã€‚
```
In [7]: df1 = pd.DataFrame({'A': ['A0', 'A1', 'A2', 'A3'],
   ...:                     'B': ['B0', 'B1', 'B2', 'B3'],
   ...:                     'C': ['C0', 'C1', 'C2', 'C3'],
   ...:                     'D': ['D0', 'D1', 'D2', 'D3']},
   ...:                     index=[0, 1, 2, 3])
   ...: 

In [8]: df4 = pd.DataFrame({'B': ['B2', 'B3', 'B6', 'B7'],
   ...:                     'D': ['D2', 'D3', 'D6', 'D7'],
   ...:                     'F': ['F2', 'F3', 'F6', 'F7']},
   ...:                    index=[2, 3, 6, 7])
   ...: 

#å…³é”®å‚æ•°axisï¼Œå†³å®šäº†æ‹¼æ¥çš„æ–¹å‘ï¼Œé»˜è®¤ä¸ºæ‹¼æ¥è¡Œï¼ˆå³å‘ä¸‹æ‹¼æ¥ï¼‰ï¼Œaxis=1æ—¶æ‹¼æ¥åˆ—ï¼ˆå³å‘å³æ‹¼æ¥ï¼‰
In [9]: result = pd.concat([df1, df4], axis=1, sort=False)
```
![_images/merging_concat_axis1.png](https://pandas.pydata.org/pandas-docs/stable/_images/merging_concat_axis1.png)
- append
appendæ—¶concatçš„ç®€åŒ–å‡½æ•°ï¼Œå®ƒåªèƒ½æ‹¼æ¥è¡Œï¼Œå³å‘ä¸‹æ‹¼æ¥ã€‚
```
In [10]: df2 = pd.DataFrame({'A': ['A4', 'A5', 'A6', 'A7'],
   ...:                     'B': ['B4', 'B5', 'B6', 'B7'],
   ...:                     'C': ['C4', 'C5', 'C6', 'C7'],
   ...:                     'D': ['D4', 'D5', 'D6', 'D7']},
   ...:                      index=[4, 5, 6, 7])
   ...: 
In [11]: result = df1.append(df2)
```
 
![_images/merging_append1.png](https://pandas.pydata.org/pandas-docs/stable/_images/merging_append1.png) 

- æ€»ç»“
 
    - mergeä¸»è¦ç”¨æ¥æ ¹æ®keyåˆ—å¯¹æ•°æ®é›†è¿›è¡Œåˆå¹¶ï¼›
    - joinç›¸å½“äºç®€åŒ–ç‰ˆçš„mergeï¼Œkeyé»˜è®¤ä¸ºindexï¼Œæ‰€ä»¥ä½ å¦‚æœæƒ³æŒ‰ç…§indexå¯¹æ•°æ®é›†åˆå¹¶æ—¶ï¼Œjoinå°±æ˜¯ä½ çš„é¦–é€‰ï¼›
    - å¦‚æœä½ æƒ³å¯¹æ•°æ®é›†è¿›è¡Œæ¨ªå‘è¿æ¥ï¼ˆaxis = 1ï¼‰æˆ–è€…çºµå‘é“¾æ¥æ—¶ï¼Œè®°å¾—æƒ³èµ·æ¥ç”¨concatï¼›
    - appendç›¸å½“äºæ˜¯ç®€åŒ–ç‰ˆçš„concatï¼Œç”¨å¾—é¢‘æ¬¡æ¯”concatè¦å¤šå¾—å¤šã€‚
    

 ## æœ€å
 æœ¬æ–‡ä¾ç„¶åªæ˜¯Pandasçš„å†°å±±ä¸€è§’ï¼Œå¸Œæœ›èƒ½å¼•èµ·ä½ ä»¬çš„å…´è¶£å»ç§¯ææ¢ç´¢ï¼Œæ¯”å¦‚è¯´æ›´æ–°æ•°æ®æ—¶å¯ä»¥ç”¨åˆ°`update`æˆ–è€…`combine_first`å‡½æ•°ï¼Œå¯¹æ•°æ®è¿›è¡Œreshapeæˆ–è€…èšåˆçš„`stack`ã€`pivot`ï¼Œå¯¹æ—¶é—´åºåˆ—è¿›è¡Œå¤„ç†çš„`datetime`ç­‰ç­‰ã€‚å¤§å®¶ä¹Ÿä¸è¦è¢«è¿™ä¹ˆå¤šå‡½æ•°å“åˆ°ï¼Œåœ¨å­¦ä¹ æˆ–è€…å·¥ä½œçš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­åœ°å»å°è¯•æ–°æ–¹æ³•ï¼Œå¤šå»ç¿»Pandasçš„å®˜æ–¹æ–‡æ¡£ï¼Œå¤šè®°ç¬”è®°ï¼Œç›¸ä¿¡ä½ åœ¨æ•°æ®ç§‘å­¦çš„é“è·¯ä¸Šè‚¯å®šä¼šè¶Šèµ°è¶Šè¿œå“’ï¼
